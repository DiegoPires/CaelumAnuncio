<h1>Cadastro de anuncio</h1>

<p><%= notice %></p>
<p><%= alert %></p>

<% if user_signed_in? %>
  <%= render partial: "anuncios/form" %>
<% end %>

<br><br>

<table width="750" border=1 align=center>
  <tr>
    <th>Modelo</th>
    <th>Ano</th>
    <th>Valor</th>
    <th>Marca</th>
    <th>Descricao</th>
    <th>Anunciante</th>
    <td width=120></th>
  </tr>
  <% @anuncios.each do |a| %>
    <tr>
      <td><%= a.modelo %></td>
      <td><%= a.ano %></td>
      <td><%= a.valor %></td>
      <td><%= a.descricao %></td>
      <td><%= a.anunciante.nome if a.anunciante %></td>
      <td align=center>
        <% if can?(:edit, a) %>
          <%= link_to "Editar", edit_anuncio_path(a) %> | 
        <% end %>
        <% if can?(:delete, a) %>
          <%= link_to "Excluir", delete_anuncio_path(a), method: :delete, data: { confirm: "Mesmo?" } %>
        <% end %>
        <% if can?(:approve, a) && !a.aprovado %>
          <%= link_to "Aprovar", approve_anuncio_path(a), method: :put %>
        <% end %>
      </td>      
    </tr>
  <% end %>
</table>
